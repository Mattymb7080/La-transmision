<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Transmisi칩n Rota</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuente Inter (para men칰s) y IBM Plex Mono (para el juego) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Enlace al archivo CSS externo -->
    <link rel="stylesheet" href="Estilos.css">
</head>
<body class="device-pc"> <!-- Inicia como PC por defecto, JS lo cambiar치 -->

    <div id="app">
    
        <!-- Overlay de Selecci칩n de Dispositivo -->
        <div id="device-select-overlay" class="hidden">
            <div id="device-select-box">
                <h2 class="text-2xl font-bold mb-6">Selecciona tu dispositivo</h2>
                <div class="flex">
                    <button id="device-btn-mobile" class="btn device-btn">游님</button>
                    <button id="device-btn-pc" class="btn device-btn">游눹</button>
                </div>
            </div>
        </div>

        <!-- Pantalla: Men칰 Principal -->
        <div id="main-menu" class="hidden flex-col items-center justify-center h-full p-8">
            <!-- NUEVO: Contenedor para que el z-index funcione -->
            <div id="main-menu-content-wrapper" class="flex flex-col items-center justify-center h-full w-full">
                <h1 class="text-6xl font-bold font-mono text-center mb-12" style="color: var(--theme-text); text-shadow: var(--theme-glow);">LA TRANSMISI칍N</h1>
                
                <button id="play-btn" class="btn text-2xl mb-6 w-64">Jugar</button>
                <button id="settings-btn" class="btn text-xl w-64 mb-4">Ajustes</button>
                <button id="load-checkpoint-btn" class="btn btn-secondary text-lg w-64">Repetir desde guardado</button>
            </div>
        </div>

        <!-- NUEVO: Pantalla de Selecci칩n de Dificultad -->
        <div id="difficulty-select-screen" class="hidden flex-col items-center justify-center h-full p-8">
            <h2 class="text-3xl font-bold mb-8" style="color: var(--theme-text);">SELECCIONA DIFICULTAD</h2>
            
            <button id="difficulty-easy" class="btn btn-easy text-xl w-64 mb-4">F치cil</button>
            <button id="difficulty-medium" class="btn btn-medium text-xl w-64 mb-4">Medio</button>
            <button id="difficulty-hard" class="btn btn-hard text-xl w-64 mb-4">Dif칤cil</button>
            <button id="difficulty-nightmare" class="btn btn-nightmare text-xl w-64 mb-4">PESADILLA</button>
            
            <button id="difficulty-back-btn" class="btn text-xl w-64 mt-auto">Volver</button>
        </div>


        <!-- Pantalla: Opciones -->
        <div id="settings-screen" class="hidden flex-col items-center h-full p-8">
            <h2 class="text-3xl font-bold mb-8" style="color: var(--theme-text);">AJUSTES</h2>
            
            <select id="theme-select">
                <option value="green">Verde CRT</option>
                <option value="amber">츼mbar</option>
                <option value="blue">Azul</option>
                <option value="blanco">Blanco</option>
                <option value="negro">Negro</option>
            </select>
            
            <button id="change-device-btn" class="btn text-xl w-64 mt-6">Cambiar Dispositivo</button>
            
            <!-- NUEVO: Bot칩n de Reset -->
            <button id="reset-data-btn" class="btn btn-danger text-xl w-64 mt-6">Resetear Datos</button>
            
            <button id="back-to-menu-btn" class="btn text-xl w-64 mt-auto">Volver</button>
        </div>

        <!-- Pantalla: Juego -->
        <div id="game-screen" class="hidden h-full">
            
            <!-- Encabezado del juego -->
            <div id="game-header" class="flex justify-between items-center">
                <button id="game-back-to-menu-btn" class="btn text-sm py-2 px-4">MEN칔</button>
                <div class="flex items-center space-x-4">
                    <button id="backpack-btn" class="btn text-sm py-2 px-4 hidden">MOCHILA [M]</button>
                    <div id="player-state-button" class="text-sm">
                        ESTADO: <span id="player-state" class="font-bold life-ok">CALMADO</span>
                    </div>
                    <div id="rulo-hud" class="hidden">
                        RULO: <span id="rulo-state" class="font-bold life-ok">OK</span>
                    </div>
                </div>
            </div>

            <!-- Contenedor de la narrativa -->
            <div id="narrative-container" class="flex-grow flex flex-row relative" onclick="handleNarrativeClick()">
                
                <!-- Columna Izquierda (Principal) -->
                <div id="main-column" class="flex-grow flex flex-col">
                    <div id="narrative-log">
                        <!-- El texto del juego aparece aqu칤 -->
                    </div>
                    
                    <div id="options-container">
                        <!-- Las opciones [ ] aparecen aqu칤 -->
                    </div>
                </div>

                <!-- Columna Derecha (Notificaciones) - MODIFICADO: 'hidden' eliminado -->
                <div id="notification-column" class="w-1/3 max-w-sm flex flex-col">
                    <div id="notification-log" class="flex-grow p-2 overflow-y-auto">
                        <!-- Notificaciones de monstruos y eventos aqu칤 -->
                    </div>
                </div>
            </div>

            <!-- Pie de p치gina (Ruido y Ubicaciones) -->
            <div id="game-footer" class="space-y-4">
                <div class="flex items-center space-x-3">
                    <span class="font-bold">RUIDO:</span>
                    <div id="noise-bar-container" class="flex-grow" title="Intentar reducir ruido...">
                        <div id="noise-bar"></div>
                    </div>
                    <span id="noise-value" class="font-bold w-12 text-right">0</span>
                    <span id="noise-text" class="w-20 text-left" style="color: var(--theme-calm);">Tranquilo</span>
                </div>
                <div class="flex items-center">
                    <span class="font-bold mr-4">UBICACI칍N:</span>
                    <div id="location-menu" class="inline-block">
                        <!-- Botones de ubicaci칩n aqu칤 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de Mochila (Inventario) -->
        <div id="backpack-modal" class="modal hidden">
            <h2 class="text-2xl font-bold mb-6">[ MOCHILA ]</h2>
            <div id="backpack-list" class="space-y-3 mb-6">
                <!-- Items del inventario aqu칤 -->
                <div class="backpack-item">Cargando...</div>
            </div>
            <button id="close-backpack-btn" class="btn w-full">Cerrar mochila</button>
        </div>
        
        <!-- Modal de Estad칤sticas del Jugador -->
        <div id="player-stats-modal" class="modal hidden">
            <h2 class="text-2xl font-bold mb-6">[ ESTADO DEL JUGADOR ]</h2>
            <ul id="player-stats-list" class="stats-list">
                <!-- Stats se llenan din치micamente -->
            </ul>
            <button id="close-player-stats-btn" class="btn w-full">Cerrar</button>
        </div>
        
        <!-- Modal de Estad칤sticas de Rulo -->
        <div id="rulo-stats-modal" class="modal hidden">
            <h2 class="text-2xl font-bold mb-6">[ ESTADO DE RULO ]</h2>
            <ul id="rulo-stats-list" class="stats-list">
                <!-- Stats se llenan din치micamente -->
            </ul>
            <button id="close-rulo-stats-btn" class="btn w-full">Cerrar</button>
        </div>
        
        <!-- NUEVO: Modal de Confirmaci칩n Gen칠rico -->
        <div id="confirm-modal" class="modal hidden">
            <h2 class="text-2xl font-bold mb-6">CONFIRMAR ACCI칍N</h2>
            <p id="confirm-message" class="mb-6">쮼st치s seguro?</p>
            <div class="flex justify-between">
                <button id="confirm-btn-yes" class="btn btn-danger w-5/12">S칈</button>
                <button id="confirm-btn-no" class="btn btn-medium w-5/12">NO</button>
            </div>
        </div>
        
        <!-- NUEVO: Minijuego de Calma -->
        <div id="calm-minigame" class="hidden">
            <h3 class="text-2xl font-bold mb-4">MANT칄N LA CALMA</h3>
            <p class="mb-6">Presiona [ESPACIO] en la zona verde</p>
            <div id="calm-bar">
                <div id="calm-target"></div>
                <div id="calm-marker"></div>
            </div>
            <button id="calm-cancel-btn" class="btn btn-secondary text-lg mt-6">Cancelar</button>
        </div>
        
        <!-- Icono de guardado -->
        <div id="save-icon">游</div>
        
        <!-- Bot칩n de Reacci칩n Din치mico -->
        <button id="reaction-btn">
            <!-- El temporizador puede ir aqu칤 -->
        </button>

    </div>

    <!-- Enlace al archivo JavaScript externo -->
    <script src="Logica.js"></script>
</body>
</html>
